Weight: 6%
Domain: Supply Chain Security (20%)

Context:
Images from untrusted registries must be blocked. Configure an admission controller
to enforce image policy.

Task:
1. An image policy webhook service is deployed at:
   https://image-policy-webhook.image-policy.svc:443

   The CA certificate is at: /etc/kubernetes/pki/image-policy/ca.crt

2. Create a kubeconfig file for the webhook at:
   /etc/kubernetes/admission/image-policy-kubeconfig.yaml

3. Create an admission configuration at:
   /etc/kubernetes/admission/admission-config.yaml
   - Configure ImagePolicyWebhook plugin
   - Set defaultAllow to false (deny if webhook unavailable)

4. Configure the kube-apiserver to:
   - Enable the ImagePolicyWebhook admission plugin
   - Use the admission configuration file

5. Test the webhook by deploying pods with images from different registries

Save your admission configuration to: /opt/course/16/admission-config.yaml
Save the webhook kubeconfig to: /opt/course/16/image-policy-kubeconfig.yaml
Save test results to: /opt/course/16/policy-test.txt
