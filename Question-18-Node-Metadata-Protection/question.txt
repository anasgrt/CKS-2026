Weight: 5%
Domain: Cluster Setup (15%)

Context:
On cloud providers (AWS, GCP, Azure), pods can access the instance metadata service
at 169.254.169.254. This can leak sensitive credentials like IAM roles/service accounts.
Block this access using NetworkPolicy.

Task:
1. Create namespace 'protected-ns' if it doesn't exist

2. Create a NetworkPolicy named 'block-metadata' in namespace 'protected-ns' that:
   - Applies to ALL pods in the namespace
   - Blocks egress to 169.254.169.254 (metadata endpoint)
   - Allows egress to all other destinations
   - Allows DNS traffic to work

3. Create a test pod in 'protected-ns'

4. Verify metadata endpoint is blocked from the test pod

5. Verify other traffic still works from the test pod

Save your NetworkPolicy to: /opt/course/18/metadata-netpol.yaml
Save test results (blocked and allowed traffic) to: /opt/course/18/test-result.txt
